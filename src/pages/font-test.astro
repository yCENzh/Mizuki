---
import Layout from '../layouts/Layout.astro';
import { getFontConfig } from '../utils/font-config';

const fontConfig = getFontConfig();
---

<Layout title="字体配置测试">
  <main class="max-w-4xl mx-auto px-4 py-8">
    <h1 class="text-4xl font-bold mb-8">字体配置系统测试</h1>
    
    <!-- 字体配置信息 -->
    <section class="mb-8 p-6 bg-gray-100 dark:bg-gray-800 rounded-lg">
      <h2 class="text-2xl font-semibold mb-4">当前字体配置</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <h3 class="font-medium mb-2">全局字体</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400">
            字体族: {fontConfig.global.fontFamily}
          </p>
          <p class="text-sm text-gray-600 dark:text-gray-400">
            回退: {fontConfig.global.fallback.join(', ')}
          </p>
        </div>
        <div>
          <h3 class="font-medium mb-2">代码字体</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400">
            字体族: {fontConfig.code.fontFamily}
          </p>
          <p class="text-sm text-gray-600 dark:text-gray-400">
            回退: {fontConfig.code.fallback.join(', ')}
          </p>
        </div>
      </div>
      
      {fontConfig.customFonts.length > 0 && (
        <div class="mt-4">
          <h3 class="font-medium mb-2">自定义字体</h3>
          <ul class="space-y-1">
            {fontConfig.customFonts.map((font) => (
              <li class="text-sm text-gray-600 dark:text-gray-400">
                {font.name} - {font.src} ({font.format})
              </li>
            ))}
          </ul>
        </div>
      )}
    </section>

    <!-- 字体效果展示 -->
    <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-4">字体效果展示</h2>
      
      <div class="space-y-6">
        <!-- 标题样式 -->
        <div>
          <h3 class="text-lg font-medium mb-2">标题样式</h3>
          <h1 class="text-4xl font-bold mb-2">这是一级标题 (H1)</h1>
          <h2 class="text-3xl font-semibold mb-2">这是二级标题 (H2)</h2>
          <h3 class="text-2xl font-medium mb-2">这是三级标题 (H3)</h3>
          <h4 class="text-xl font-medium mb-2">这是四级标题 (H4)</h4>
        </div>

        <!-- 正文样式 -->
        <div>
          <h3 class="text-lg font-medium mb-2">正文样式</h3>
          <p class="mb-4">
            这是一段普通的正文内容。Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
            Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
            这里包含了中英文混排的效果测试。
          </p>
          <p class="text-sm text-gray-600 dark:text-gray-400">
            这是小号文字的效果展示。Small text demonstration with mixed languages.
          </p>
        </div>

        <!-- 代码样式 -->
        <div>
          <h3 class="text-lg font-medium mb-2">代码样式</h3>
          <p class="mb-2">行内代码: <code class="bg-gray-200 dark:bg-gray-700 px-1 rounded">console.log('Hello World')</code></p>
          
          <pre class="bg-gray-900 text-green-400 p-4 rounded-lg overflow-x-auto"><code>// 代码块示例
function greet(name) {
  console.log(`Hello, ${name}!`);
  return `Welcome to the font configuration system`;
}

// 中文注释测试
const message = greet('用户');
console.log(message);</code></pre>
        </div>

        <!-- 特殊字符 -->
        <div>
          <h3 class="text-lg font-medium mb-2">特殊字符测试</h3>
          <p class="mb-2">
            数字: 0123456789<br>
            符号: !@#$%^&*()_+-=[]{}|;':\",./<>?<br>
            中文标点: 。，、；：？！""''（）【】《》<br>
            日文: こんにちは、世界！<br>
            韩文: 안녕하세요, 세계!<br>
            俄文: Привет, мир!<br>
            阿拉伯文: مرحبا بالعالم<br>
          </p>
        </div>

        <!-- 字重测试 -->
        <div>
          <h3 class="text-lg font-medium mb-2">字重测试</h3>
          <p class="font-thin">Thin 字重测试 (100)</p>
          <p class="font-light">Light 字重测试 (300)</p>
          <p class="font-normal">Normal 字重测试 (400)</p>
          <p class="font-medium">Medium 字重测试 (500)</p>
          <p class="font-semibold">Semibold 字重测试 (600)</p>
          <p class="font-bold">Bold 字重测试 (700)</p>
          <p class="font-extrabold">Extrabold 字重测试 (800)</p>
          <p class="font-black">Black 字重测试 (900)</p>
        </div>
      </div>
    </section>

    <!-- 开发工具 -->
    <section class="mb-8 p-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
      <h2 class="text-2xl font-semibold mb-4">开发工具</h2>
      <p class="mb-4 text-sm text-gray-600 dark:text-gray-400">
        在开发模式下，按 <kbd class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded text-xs">Ctrl+Shift+F</kbd> 
        可以打开字体控制面板，实时切换不同的字体预设。
      </p>
      
      <div class="space-y-2">
        <button 
          onclick="window.switchFontPreset && window.switchFontPreset('default')"
          class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 mr-2"
        >
          默认字体
        </button>
        <button 
          onclick="window.switchFontPreset && window.switchFontPreset('system')"
          class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 mr-2"
        >
          系统字体
        </button>
        <button 
          onclick="window.switchFontPreset && window.switchFontPreset('japanese')"
          class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 mr-2"
        >
          日文字体
        </button>
      </div>
    </section>

    <!-- 配置说明 -->
    <section class="mb-8">
      <h2 class="text-2xl font-semibold mb-4">配置说明</h2>
      <div class="prose dark:prose-invert max-w-none">
        <p>
          字体配置文件位于 <code>src/config.json</code> 的 <code>fonts</code> 部分。
          你可以通过修改该配置来自定义全局字体、代码字体、添加自定义字体文件和CSS样式。
        </p>
        
        <h3>主要特性</h3>
        <ul>
          <li>统一的字体配置管理</li>
          <li>自动生成 @font-face 规则</li>
          <li>Tailwind CSS 集成</li>
          <li>动态字体切换支持</li>
          <li>自定义CSS注入</li>
          <li>完整的字体回退机制</li>
        </ul>

        <h3>配置文件示例</h3>
        <pre><code>{JSON.stringify(fontConfig, null, 2)}</code></pre>
      </div>
    </section>
  </main>
</Layout>

<script>
  // 导入字体演示脚本
  import '../scripts/font-config-demo.js';
</script>